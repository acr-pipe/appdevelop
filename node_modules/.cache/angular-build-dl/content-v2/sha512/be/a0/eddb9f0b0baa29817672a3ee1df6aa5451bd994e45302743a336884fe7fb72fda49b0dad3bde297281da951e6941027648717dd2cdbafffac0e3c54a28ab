{"version":3,"sources":["./src/app/pages/cards/cards.page.html","./src/app/pages/cards/cards-routing.module.ts","./src/app/pages/cards/cards.module.ts","./src/app/pages/cards/cards.page.scss","./src/app/pages/cards/cards.page.ts"],"names":[],"mappings":"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","file":"pages-cards-cards-module-es2015.js","sourcesContent":["export default \"<ion-header>\\n  <ion-toolbar class=\\\"gradient-header\\\" color=\\\"app\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button><img src=\\\"../../../assets/icon/menuicon.svg\\\" style=\\\"width: 80%; margin: 0 auto\\\"></ion-menu-button>\\n    </ion-buttons>\\n    <ion-title [routerLink]=\\\"['/menu']\\\">\\n    Appexpress\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>    \\n  <ion-grid class=\\\"ion-padding\\\">\\n    <ion-row>\\n      <h3>Tarjetas</h3>\\n    </ion-row>\\n    <ion-card  *ngFor=\\\"let item of listaCards\\\" style=\\\"box-shadow: none !important; background: #fafafa;\\\" class=\\\"ion-padding\\\">\\n      <ion-card-content>\\n        <ion-row>\\n          <ion-col size=\\\"11\\\">\\n            <div class=\\\"ion-padding\\\" *ngIf=\\\"item[6] > 0\\\" align=\\\"right\\\">\\n              <ion-badge color=\\\"light\\\">Predeterminada</ion-badge>\\n            </div>\\n          </ion-col>\\n          <ion-col size=\\\"1\\\">\\n            <div *ngIf=\\\"item[6] == 1\\\">\\n              <ion-icon name=\\\"checkmark-circle\\\" style=\\\"font-size: 2em; margin-top: 10px; color: #128BC9;\\\"></ion-icon>\\n            </div>\\n            <div *ngIf=\\\"item[6] != 1\\\" id=\\\"{{ item[0] }}\\\" (click)=\\\"setDefecto( item[0] )\\\">\\n              <ion-icon name=\\\"radio-button-off\\\" style=\\\"font-size: 2em; margin-top: 10px;\\\"></ion-icon>\\n            </div>\\n          </ion-col>\\n        </ion-row>\\n        <ion-row>\\n          <ion-col size=\\\"9\\\" align-self-start>\\n            <p style=\\\"font-size: 1.2em;\\\">•••• •••• •••• <b>{{ item[1] }}</b></p>\\n            <small>{{ item[2] }}</small>\\n          </ion-col>\\n          <ion-col size=\\\"3\\\" align-self-center>\\n            <img src=\\\"../../../assets/icon/{{ item[5] }}.svg\\\" alt=\\\"\\\">\\n          </ion-col>\\n        </ion-row>\\n      </ion-card-content>\\n      <ion-row align-items-center>\\n        <ion-col>\\n          <ion-button expand=\\\"block\\\" class=\\\"btnapp\\\" color=\\\"btnapp\\\" (click)=\\\"cardDelete( item[0], item[3] )\\\">\\n            Eliminar\\n          </ion-button>\\n        </ion-col>\\n      </ion-row>\\n    </ion-card>\\n  </ion-grid>\\n</ion-content>\\n\\n<ion-footer style=\\\"padding: 0.2em\\\">\\n  <ion-toolbar>\\n    <ion-item [routerLink]=\\\"['/addcard']\\\">\\n      <ion-label>Agregar tarjeta</ion-label>\\n      <ion-icon name=\\\"add\\\" slot=\\\"end\\\"></ion-icon>\\n    </ion-item>\\n  </ion-toolbar>\\n</ion-footer>  \\n\"","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { CardsPage } from './cards.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: CardsPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class CardsPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { CardsPageRoutingModule } from './cards-routing.module';\n\nimport { CardsPage } from './cards.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    CardsPageRoutingModule\n  ],\n  declarations: [CardsPage]\n})\nexport class CardsPageModule {}\n","export default \".app {\\n  background: var(--ion-color-insideapp) !important;\\n  color: #F8F8F8 !important;\\n}\\n\\n.btnapp {\\n  background: var(--ion-color-btnapp) !important;\\n  color: #f8f8f8;\\n}\\n\\n.card-content-md p {\\n  margin-bottom: 0 !important;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9hbmRyZXNjZXNwZWRlcy9Eb2N1bWVudHMvYXBwcy9hcHBiYXNlL3NyYy9hcHAvcGFnZXMvY2FyZHMvY2FyZHMucGFnZS5zY3NzIiwic3JjL2FwcC9wYWdlcy9jYXJkcy9jYXJkcy5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxpREFBQTtFQUNBLHlCQUFBO0FDQ0o7O0FERUE7RUFDSSw4Q0FBQTtFQUNBLGNBQUE7QUNDSjs7QURFQTtFQUNJLDJCQUFBO0FDQ0oiLCJmaWxlIjoic3JjL2FwcC9wYWdlcy9jYXJkcy9jYXJkcy5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIuYXBwIHtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pb24tY29sb3ItaW5zaWRlYXBwKSAhaW1wb3J0YW50O1xuICAgIGNvbG9yOiAjRjhGOEY4ICFpbXBvcnRhbnQ7XG59XG5cbi5idG5hcHB7XG4gICAgYmFja2dyb3VuZDogdmFyKC0taW9uLWNvbG9yLWJ0bmFwcCkgIWltcG9ydGFudDtcbiAgICBjb2xvcjogI2Y4ZjhmODtcbn1cblxuLmNhcmQtY29udGVudC1tZCBwIHtcbiAgICBtYXJnaW4tYm90dG9tOiAwICFpbXBvcnRhbnQ7XG59IiwiLmFwcCB7XG4gIGJhY2tncm91bmQ6IHZhcigtLWlvbi1jb2xvci1pbnNpZGVhcHApICFpbXBvcnRhbnQ7XG4gIGNvbG9yOiAjRjhGOEY4ICFpbXBvcnRhbnQ7XG59XG5cbi5idG5hcHAge1xuICBiYWNrZ3JvdW5kOiB2YXIoLS1pb24tY29sb3ItYnRuYXBwKSAhaW1wb3J0YW50O1xuICBjb2xvcjogI2Y4ZjhmODtcbn1cblxuLmNhcmQtY29udGVudC1tZCBwIHtcbiAgbWFyZ2luLWJvdHRvbTogMCAhaW1wb3J0YW50O1xufSJdfQ== */\"","import { Component, OnInit } from '@angular/core';\nimport { AngularFireAuth } from '@angular/fire/auth';\nimport * as firebase from 'firebase';\nimport { CrudService } from 'src/app/services/crud.service';\nimport { FtpaymentService } from '../../services/ftpayment.service';\nimport { VerifypassPage } from '../../modals/verifypass/verifypass.page';\nimport { ModalController, LoadingController } from '@ionic/angular';\nimport { GeneralComponent } from '../../components/general/general.component';\nimport { environment } from '../../../environments/environment';\n\nconst impresa = environment.impresa;\n\n@Component({\n  selector: 'app-cards',\n  templateUrl: './cards.page.html',\n  styleUrls: ['./cards.page.scss'],\n})\nexport class CardsPage implements OnInit {\n  // tslint:disable: triple-equals\n  userid = firebase.auth().currentUser.uid;\n  listaCards: any;\n  username: string;\n\n  constructor( private afAuth: AngularFireAuth,\n               private crudService: CrudService,\n               private fts: FtpaymentService,\n               private modalCtrl: ModalController,\n               private loadingCtrl: LoadingController,\n               private general: GeneralComponent ) { }\n\n  ngOnInit() {\n    this.username = this.afAuth.auth.currentUser.email;\n  }\n\n  ionViewDidEnter() {\n    this.getCardsByUser();\n  }\n\n  setDefecto( cardid: any ) {\n    console.log('cardid');\n    console.log(cardid);\n    const data = { sel: '', tbl: 55, where: cardid + ',\"' + this.userid + '\"' };\n    this.crudService.crud( data ).subscribe(res => {\n      console.log(res);\n      this.getCardsByUser();\n    }, err => {\n      console.log(err);\n    });\n  }\n\n  getCardsByUser() {\n    console.log('getCardsByUser');\n    this.userid = this.afAuth.auth.currentUser.uid;\n    console.log(this.userid);\n\n    const data = { sel: '', tbl: 49, where: '\"' + this.userid + '\"' };\n\n    this.crudService.crud( data ).subscribe(\n      res => {\n        console.log('res');\n        console.log( JSON.stringify(res) );\n        this.listaCards = res[0];\n      },\n      err => {\n        console.log('error: crud err');\n        console.log( err );\n      }\n    );\n  }\n\ncrud( data: any ) {\n  this.crudService.crud( data ).subscribe(\n    async res => {\n      console.log('Información de tarjeta eliminada');\n      console.log( res );\n      console.log( JSON.stringify(res) );\n      this.modalCtrl.dismiss({\n        dismissed: true\n      });\n      this.getCardsByUser();\n      return true;\n    },\n    err => {\n      console.log( err );\n    }\n  );\n}\n\nasync cardDelete( idcard: number, cardTokenId: string ) {\n  console.log(this.username);\n  const modal = await this.modalCtrl.create({\n    component: VerifypassPage,\n    cssClass: 'modal-modal',\n    componentProps: {\n      getuser: this.username\n    }\n  });\n  await modal.present();\n  const { data } = await modal.onWillDismiss();\n  console.log(JSON.stringify(data));\n  console.log(data);\n  const loading = await this.loadingCtrl.create({\n    message: 'Eliminando tarjeta',\n  });\n  await loading.present();\n  if (data != undefined) {\n    console.log('data 1');\n    console.log('data');\n    this.crudService.crud({ sel: '', tbl: 96, where: impresa }).subscribe(sucft => {\n      this.fts.userDeleteCard(sucft[0][0][0], this.username, data.pass + '$', cardTokenId)\n        .subscribe( (succ: any) => {\n        console.log(JSON.stringify(succ));\n        if (succ != null) {\n          if (succ.apiStatus == 'Successful') {\n            const info = {\n              sel: '',\n              tbl: 46,\n              where: '3,' + idcard + ',\"\",\"\",\"\",\"\",\"\"'\n            };\n            this.crud( info );\n            loading.dismiss();\n          } else {\n            loading.dismiss();\n          }\n        } else {\n          this.general.mostrar_error('Tuvimos un inconveniente eliminando la tarjeta, por favor intente de nuevo');\n          loading.dismiss();\n        }\n      }, err => {\n        console.log('err api');\n        console.log(JSON.stringify(err));\n        loading.dismiss();\n      });\n    }, err => {\n      console.log('err');\n      console.log(err);\n    });\n    console.log('fin');\n  } else {\n    console.log('data 2');\n    loading.dismiss();\n  }\n}\n\n}\n"],"sourceRoot":"webpack:///"}